---
layout  : wiki
title   : Storage
summary : 로컬스토리지와 세션스토리지 그리고 쿠키
date    : 2022-05-20 15:54:32 +0900
updated : 2022-05-20 20:15:24 +0900
tag     : http
toc     : true
comment : true
public  : true
parent  : [[/http]]
latex   : true
---
* TOC
{:toc}

## Storage

> 로컬스토리지와 세션스토리지는 HTML5 에 추가된 key-value 형태의 저장소이다.

이 둘의 차이는 __데이터의 영구성__ 이다. 

세션스토리지에 있는 데이터는 브라우저를 닫으면 데이터가 사라진다. 반면, 로컬스토리지에 있는 데이터는 사용자가
데이터를 직접 지우지 않는 이상 계속 남아있다.

지속적으로 서버에게 전달되어야 하는 데이터(Ex. 자동 로그인을 위한 토큰 등)은 로컬스토리지에 저장하고,
일회성으로 사용되는 데이터는 세션스토리지에 저장하면 된다.

> 단, 개인정보와 같이 외부에 노출되서는 안되는 중요한 정보들은 로컬스토리지든 세션스토리지든 클라이언트에 저장하면 안된다.

로컬스토리지와 세션스토리지에 저장된 데이터는 클라이언트에서 서버로 요청시마다 같이 전송되지 않는다.

## Cookie

로컬스토리지와 세션스토리지가 등장하기 이전에도 브라우저에 저장소의 개념이 존재했는데, 그 역할이 바로 쿠키(Cookie)다.

쿠키는 만료 기간(expiration-period)이 있는 key-value 형식의 저장소이며, 4kb 라는 용량 제한이 있다.

클라이언트의 서버 요청마다 쿠키는 항상 같이 전송되는데 그 이유는 HTTP 의 stateless 한 특징 때문이다.

만약, 4kb 의 크기를 가진 쿠키를 서버로 전송한다고하면 그 속에는 서버에서 사용할 일이 없는 불필요한 데이터도 포함되어있을 것이다.
이러한 데이터를 스토리지에 저장하면 된다.

스토리지는 도메인별 용량 제한이 있으며, SOP 를 따르므로, 프로토콜, 호스트, 포트가 같으면 같은 저장소를 공유한다.

> 저장소의 크기는 모바일은 2.5MB, 데스크탑은 5~10MB 이며, 더 큰 용량이 필요하다면 50MB를 기본적으로 저장할 수 있는 IndexedDB 가 있다.

## Links

- [Local Storage and Session Storage](https://www.zerocho.com/category/HTML&DOM/post/5918515b1ed39f00182d3048)
